<!-- employee_information/templates/employee_information/timesheet_detail.html -->

{% extends "employee_information/base.html" %}
{% load humanize %}

{% block pageContent %}
<div class="container mt-4">
    <h1 class="mb-4">Timesheet for {{ timesheet.user.username }} - {{ timesheet.month|date:"F Y" }}</h1>
    
    <form method="POST">
        {% csrf_token %}
        <h2>Daily Entries</h2>
        <table class="table table-bordered">
            <thead class="thead-light">
                <tr>
                    <th>Date</th>
                    <th>Day</th>  <!-- Added Day column -->
                    <th>Time In</th>
                    <th>Time Out</th>
                    <th>Activity</th>
                </tr>
            </thead>
            <tbody>
                {% for entry in daily_entries %}
                    <tr {% if entry.date.weekday == 5 %}class="table-secondary"{% elif entry.date.weekday == 6 %}class="table-secondary"{% endif %}>
                        <td>{{ entry.date }}</td>
                        <td>{{ entry.date|date:"l" }}</td>  <!-- Display weekday -->
                        <td>
                            <input type="time" class="form-control" 
                                   name="time_in_{{ entry.pk }}" 
                                   value="{{ entry.time_in|date:"H:i"|default:'' }}">
                        </td>
                        <td>
                            <input type="time" class="form-control" 
                                   name="time_out_{{ entry.pk }}" 
                                   value="{{ entry.time_out|date:"H:i"|default:'' }}">
                        </td>
                        <td>
                            <input type="text" class="form-control" 
                                   name="activity_{{ entry.pk }}" 
                                   value="{{ entry.activity|default_if_none:'' }}">
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="5" class="text-center">No entries found.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        <button type="submit" class="btn btn-primary">Save All Changes</button>
    </form>
</div>
{% endblock pageContent %}